---
tags:
  - ä¸ªäººç¬”è®°
---

# ğŸ“’ æ•°æ®åº“è¿ç»´

## MySQL

!!! quote

    - [åˆæ¬¡å®‰è£…å¯†ç ](https://dev.mysql.com/doc/refman/8.0/en/data-directory-initialization.html#data-directory-initialization-password-assignment)
    - [MySQL 8.0 Reference Manual  /  MySQL Server Administration](https://dev.mysql.com/doc/refman/8.0/en/server-administration.html)
    - [é…ç½®æ–‡ä»¶è¯­æ³•](https://dev.mysql.com/doc/refman/8.0/en/option-files.html#:~:text=the%20command%20line.-,Option%20File%20Syntax,-The%20following%20description)
    - [Systemd ç®¡ç† MySQL](https://dev.mysql.com/doc/refman/8.0/en/using-systemd.html)

| program | description |
| --- | --- |
| `mysql` | command-line client |
| `mysqld` | server daemon |
| `mysqladmin` | server administration |
| `mysqldump` | backup and restore |

### å®‰è£…

- å®‰è£…åé¦–å…ˆæŸ¥çœ‹é…ç½®æ–‡ä»¶å¦‚ `/etc/mysql`ï¼Œäº†è§£å¦‚ä½•è®¿é—®ã€æ—¥å¿—ä½ç½®ã€‚å¦‚æœä¹‹åçš„è¿‡ç¨‹ä¸­ `mysqld` æ²¡æœ‰æœŸæœ›çš„è¾“å‡ºï¼Œä¸€èˆ¬æ˜¯æ”¾åˆ°æ—¥å¿—å»äº†ã€‚
- åˆå§‹åŒ–ï¼šå¯é€‰æ‹©è¦ä¸è¦ç”Ÿæˆéšæœºå¯†ç ï¼Œå¯†ç ä¼šåœ¨æ—¥å¿—ä¸­ã€‚ä½¿ç”¨ Docker éƒ¨ç½²æ—¶ä¹Ÿä¼šåœ¨æ—¥å¿—ä¸­ç”Ÿæˆéšæœºå¯†ç ã€‚

```bash
mysqld --initialize
mysql -u root -p

mysqld --initialize-insecure
mysql -u root --skip-password

ALTER USER 'root'@'localhost' IDENTIFIED BY 'root-password';
```

- ä¿®æ”¹é…ç½®æ–‡ä»¶åæ£€æŸ¥ï¼š

```bash
mysqld --defaults-file=./my.cnf-test --validate-config
```

- `root` é»˜è®¤è®¤è¯æ–¹å¼ä¼¼ä¹æ˜¯ `auth_plugin` è€Œä¸æ˜¯å¯†ç ï¼Œåˆæ¬¡å®‰è£…åä¸€èˆ¬éƒ½è¿æ¥ä¸ä¸Šã€‚å¯ä»¥ä½¿ç”¨ `sudo mysql` è¿›å…¥ï¼ˆè¿™ä¸éœ€è¦å¯†ç ï¼‰ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ä¿®æ”¹å¯†ç ä¸º `root`ï¼š

```mysql
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'root';
```

### ä½¿ç”¨

- è¿æ¥å‘½ä»¤ï¼š`mysql`
    - `-u root` æŒ‡å®šç”¨æˆ·
    - `-p` è¦æ±‚å¯†ç 
    - `--socket /var/run/mysqld/mysqld.sock` å¯èƒ½æ‰¾ä¸åˆ°é»˜è®¤çš„ socket æ–‡ä»¶ï¼Œæ­¤æ—¶éœ€è¦æŸ¥è¯¢ `journalctl mysql` æ‰¾åˆ°
- ä½¿ç”¨ MySQL WorkBench æä¾› GUI æ“ä½œç•Œé¢

### ç»´æŠ¤

- åŸºæœ¬ç»´æŠ¤å‘½ä»¤ï¼š

```sql
SHOW DATABASES; TABLES; STATUS;
SHOW CREATE DATABASE some_db; TABLE some_table;
SHOW GRANTS; ERORRS; WARNINGS;
DESCRIBE some_table; SHOW COLUMNS FROM some_table;
USE some_db;
HELP some_command;
```

- æ³¨é‡Šï¼š`--` å¼€å¤´
- å¦‚æœåªéœ€æŸ¥çœ‹æŸä¸ªä¿¡æ¯ä½†å®ƒå¤ªé•¿äº†ï¼Œå¯ä»¥ä½¿ç”¨ `\G` ç»“å°¾ï¼Œè¿™æ ·ä¼šä»¥åˆ—çš„å½¢å¼æ˜¾ç¤ºã€‚æ¯”å¦‚æŸ¥çœ‹ `SHOW CREATE TABLE some_table\G`ï¼š

```text
mysql> show create table orders \G
*************************** 1. row ***************************
       Table: orders
Create Table: CREATE TABLE `orders` (
  `order_num` int NOT NULL AUTO_INCREMENT,
  `order_date` datetime NOT NULL,
  `cust_id` int NOT NULL,
  PRIMARY KEY (`order_num`),
  KEY `fk_orders_customers` (`cust_id`),
  CONSTRAINT `fk_orders_customers` FOREIGN KEY (`cust_id`) REFERENCES `customers` (`cust_id`)
) ENGINE=InnoDB AUTO_INCREMENT=20010 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
1 row in set (0.00 sec)
```

## PostgreSQL

!!! quote

    - [PostgreSQL: Downloads](https://www.postgresql.org/download/)
    - æ¨èé˜…è¯»ï¼šPractical SQL : a beginner's guide to storytelling with data / Anthony DeBarros.

### éƒ¨ç½²

- æœåŠ¡ç«¯ï¼šå‚è€ƒ [postgres - Official Image | Docker Hub](https://hub.docker.com/_/postgres)
- å®¢æˆ·ç«¯ï¼š

    ```bash
    sudo apt install postgresql-client
    psql -h localhost -U postgres
    \l
    \c
    \dt
    ```

    | é€‰é¡¹ | æè¿° |
    | --- | --- |
    | `-h` | Host |
    | `-p` | Port |
    | `-U` | User |

### æŸ¥è¯¢æŠ€å·§

- å‚ç›´å¸ƒå±€ï¼šä½¿ç”¨ `\x` åˆ‡æ¢ï¼Œä½¿ç”¨ `\x\g\x` ä¸€æ¬¡æ€§åˆ‡æ¢å¹¶æ‰§è¡ŒæŸ¥è¯¢ã€‚
