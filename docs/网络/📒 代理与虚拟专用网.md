---
tags:
  - ä¸ªäººç¬”è®°
---

# ðŸ“’ ä»£ç†ä¸Žè™šæ‹Ÿä¸“ç”¨ç½‘

## ä»£ç†

## VPN

### [WireGuard](https://www.wireguard.com/)

- **åŸºæœ¬åŽŸç†ï¼š**

    - æ— è¿žæŽ¥
    - æ¡æ‰‹è¿‡ç¨‹ï¼š

        ```mermaid
        sequenceDiagram
            participant A as initiator
            participant B as responder
            A->>B: handshake initiation
            B->>A: handshake response
            Note over A,B: keys calculated
            A<<->>B: secure data exchange
        ```

    - å‘åŒ…è¿‡ç¨‹ï¼š
        1. æ ¹æ® IP åœ°å€å¯»æ‰¾ Peerï¼Œå¦åˆ™ä¸¢å¼ƒã€‚
        2. åŠ å¯†ã€‚
        3. å¯»æ‰¾ Peer çš„ Remote Endpointã€‚
        4. å‘åŒ…ã€‚
    - æ”¶åŒ…è¿‡ç¨‹ï¼š
        1. è§£å¯†ã€‚
        2. è®¤è¯ Peer ä¿¡æ¯ï¼ŒæˆåŠŸåˆ™æ›´æ–° Peer Endpointã€‚
        3. æ£€æŸ¥ Peer æ˜¯å¦è¢«å…è®¸ä»¥å¯¹åº”çš„ IP åœ°å€å‘é€æ•°æ®ã€‚
        4. æ”¶åŒ…ã€‚

- **é…ç½®ï¼š**

    !!! warning

        `wg` å‘½ä»¤å’Œ `wg-quick` å‘½ä»¤çš„é…ç½®æ–‡ä»¶æ ¼å¼ä¸åŒã€‚ä¸‹é¢ä¸º `wg-quick` çš„é…ç½®æ–‡ä»¶ã€‚

    ```bash
    wg-quick up wg0
    ```

    ```ini title="/etc/wireguard/wg0.conf"
    [Interface]
    Address = 
    ListenPort = 
    PrivateKey = 
    MTU = # å¦‚æœ‰ L2TP ç­‰éš§é“æœåŠ¡å¯èƒ½éœ€è¦è°ƒæ•´ MTU

    [Peer]
    PublicKey = 
    Endpoint = 
    AllowedIPs = 
    PersistentKeepalive = # å¦‚ NAT çŽ¯å¢ƒè¾ƒå·®å¯è®¾ç½® PersistentKeepalive ä¿æŒè¿žæŽ¥
    ```

- **è°ƒæµ‹ï¼š**

    - [Four Ways to View WireGuard Logs | Pro Custodibus](https://www.procustodibus.com/blog/2021/03/wireguard-logs/)

        ```bash
        echo module wireguard +p > /sys/kernel/debug/dynamic_debug/control
        echo module wireguard -p > /sys/kernel/debug/dynamic_debug/control
        ```
